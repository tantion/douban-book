define("js/baidu",function(require,a,b){"use strict";function c(a){var b=new f.Deferred,c=[],d='http://www.baidu.com/s?wd=title%3A+%28+"#keyword#"%2B%28pdf+%7C+mobi+%7C+epub+%7C+txt%29%29+site%3A%28pan.baidu.com%29';return d=d.replace("#keyword#",encodeURIComponent(a)),h.hasOwnProperty(d)?(c=h[d],c&&c.length?b.resolve(c):b.reject()):f.ajax({url:d,type:"GET",timeout:i,xhrFields:{withCredentials:!0}}).done(function(a){a=a.replace(/src=/gi,"data-src=");var c=f(f.parseHTML(a)),e=c.find(".c-container"),g=[];e.each(function(){var a=f(this),b=a.find(".t a").eq(0),c=a.find(".c-abstract").eq(0),d=f.trim(c.text()),e="",h=d.match(/文件大小:([\w\.]+) /);h||(h=d.match(/下载\(([\w\.]+)\)/)),d=f.trim(b.text()).replace(/^(.+)_免费高速.*$/,"$1"),h&&h.length>1&&(e=h[1],e&&(d+=" "+e)),d&&g.push({href:b.attr("href"),title:d})}),h[d]=g,g.length?b.resolve(g):b.reject()}).fail(function(){b.reject()}),b.promise()}function d(a){var b=g.render(j,{items:a}),c=f(b);return c.on("mouseenter","a",function(){f(this).tipsy({gravity:"w",offset:3}).tipsy("show")}),c}function e(a){var b=a.title,e=new f.Deferred;return b?(e.notify("正在加载搜索结果，请耐心等待..."),c(b).done(function(a){e.resolve(d(a),a.length)}).fail(function(){e.reject()})):e.reject(),e.promise()}var f=require("jquery"),g=require("mustache"),h={},i=3e4,j='{{#items}}<dl class="book-improve-bt-dl"><dt class="book-improve-bt-title"><a title="点击打开下载页面" target="_blank" href="{{href}}">{{title}}</a></dt>{{#files}}<dd class="book-improve-bt-desc">{{&title}}</dd>{{/files}}</dl>{{/items}}';b.exports={name:"百度云",search:e}});